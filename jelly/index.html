<html>
  <head>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body>

      <div id="GUI">


  </div>

  <div id="TITLE">
    <h1>PLAID  POLYMER</h1>

  </div>

  <div id="MailChimp">
    
    <div class="headline" >
        <!-- <h5>Experience</h5> -->
        
        <span id="email-signup-text">
          Sign up for a free download of Maru. 
        </span>

        <!-- Begin Mailchimp Signup Form -->
        <div id="mc_embed_signup">
        <form action="https://robbietilton.us13.list-manage.com/subscribe/post?u=c0ddd892fa950255db1e90506&amp;id=7479db8399" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">
          
          <div class="mc-field-group">
            <input autocomplete="off" spellcheck="false" id="subscribeField" placeholder="Email Address" type="email" value="" name="EMAIL" class="required email">
            <input id="subscribeBtn" type="submit" value="" name="subscribe" class="button">
              </div>
          </div>

          <div id="mce-responses" class="clear">
            <div class="response" id="mce-error-response" style="display:none"></div>
            <div class="response" id="mce-success-response" style="display:none"></div>
          </div>    
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_c0ddd892fa950255db1e90506_7479db8399" tabindex="-1" value=""></div>

        </form>
        </div>
        <!--End mc_embed_signup-->


        <div id="Close" onclick="doClick()">X</div>
        
        
      </div>
  </div>




<script src = "jquery.min.js"         ></script>
<script src = "Tween.js"              ></script>
<script src = "three.js"              ></script>
<script src = "stats.min.js"          ></script>
<script src = "TrackballControls.js"  ></script>
<script src = "OBJLoader.js"          ></script>
<script src = "AudioController.js"    ></script>
<script src = "Looper.js"             ></script>
<script src = "AudioTexture.js"       ></script>
<script src = "Stream.js"             ></script>
<script src = "underscore.js"         ></script>
<script src = "ShaderLoader.js"       ></script>
<script src = "Loader.js"             ></script>
<script src = "PhysicsRenderer.js"    ></script>
<script src = "ParticleUtils.js"      ></script>
<script src = "LoadedAudio.js"        ></script>
<script src = "dat.gui.min.js"        ></script>
<script src = "ObjectControls.js"     ></script>


<script src = "initThree.js"          ></script>
<script src = "initJelly.js"          ></script>
<script src = "initPoly.js"           ></script>

<script src = "FurryGroup.js"         ></script>
<script src = "FurryTail.js"          ></script>
<script src = "FurryHead.js"          ></script>


<script>  

  function doClick(){
    var x = document.getElementById("MailChimp");
    x.style.display = "none";
  }

  function displaySignUp(){
     var x = document.getElementById("MailChimp");
    x.style.display = "block";
  }

  function c(val){console.log(val);}
  var container , camera, scene, renderer , stats;
  var clock;


// tmp vecs to reuse
v1 = new THREE.Vector3();
v2 = new THREE.Vector3();

  var G = {}
  G.uniforms = {
    time : { type:"f" , value:0 },
    dT : { type:"f" , value:0 },
    t_audio : { type:"t" , value:null },
    dpr:{ type:"f" , value: window.devicePixelRatio || 1 }
  }


  var mouse =  new THREE.Vector2();

  var loader = new Loader({ numberToLoad: 0 });

  var LOOPS = {}
  var POLYS = {}

  //loader.beginLoading();
  var shaders = new ShaderLoader('shaders');
 
  shaders.beginLoad = function(){
    loader.beginLoading();
  }

  shaders.endLoad = function(){
    loader.endLoading();
  }

  shaders.shaderSetLoaded = function(){
    //init();

  }




  
  sceneSize = 10;

  shaders.load( 'ss-furryTail'   , 'furryTail' , 'simulation'  );
  shaders.load( 'fs-furryTail'   , 'furryTail' , 'fragment'  );
  shaders.load( 'vs-furryTail'   , 'furryTail' , 'vertex'  );


  shaders.load( 'ss-mainTail'   , 'mainTail' , 'simulation'  );
  shaders.load( 'fs-mainTail'   , 'mainTail' , 'fragment'  );
  shaders.load( 'vs-mainTail'   , 'mainTail' , 'vertex'  );

  shaders.load( 'ss-furryHead'   , 'furryHead' , 'simulation'  );
  shaders.load( 'fs-furryHead'   , 'furryHead' , 'fragment'  );
  shaders.load( 'vs-furryHead'   , 'furryHead' , 'vertex'  );

  shaders.load( 'fs-furryParticles'   , 'furryParticles' , 'fragment'  );
  shaders.load( 'vs-furryParticles'   , 'furryParticles' , 'vertex'  );



  shaders.load( 'vs-poly'   , 'poly' , 'vertex'  );
  shaders.load( 'fs-poly'   , 'poly' , 'fragment'  );

  shaders.load( 'vs-polyOutline'   , 'polyOutline' , 'vertex'  );
  shaders.load( 'fs-polyOutline'   , 'polyOutline' , 'fragment'  );

  shaders.load( 'vs-polyOrg'   , 'polyOrg' , 'vertex'  );
  shaders.load( 'fs-polyOrg'   , 'polyOrg' , 'fragment'  );
 


  var audioController = new AudioController();

//  audioController.mute.gain.value = 0;

  G.uniforms.t_audio.value = audioController.texture;



   
  var loopList = [
    "BassKick",
    "BassMod",
    "BellA",
    "BellB",
    "BellBright",
    "BellC",
    "Clap",
    "Hats",
    "Hiup",
    "IMP",
    "Kick",
    "Logrit",
    "Lopan",
    "ModA",
    "ModB",
    "RNL",
    "Roll",
    "Snare",
    "Upmid",
    "Voc"
  ];

  for( var i = 0; i < loopList.length; i++ ){
    loader.beginLoading();
    var newName = "Maru" + loopList[i] + "Loop.mp3";
    var note = new LoadedAudio( audioController , newName , {
      looping:true 
    });

    LOOPS[loopList[i]] = note;
  //   audioController.notes.push( note );
     
    note.onLoad = function(){
      this.endLoading();
    }.bind( loader );

  }


  var looper          = new Looper( audioController , G.uniforms.time , {

    beatsPerMinute: 120,
    beatsPerMeasure: 4,
    measuresPerLoop: 8
    
  });


  var particleTexture = THREE.ImageUtils.loadTexture( 'icons/cabbibo.png');




    bait = new THREE.Object3D();



 // initAudio();

  function init(){



    initThree();
    initJelly();
    initPoly();


    camera.position.x = 0;
    camera.position.y = 0;
    camera.position.z = 1000;
    camera.rotation.x = 0;
    camera.rotation.y = 0;
    camera.rotation.z = 0;
    Jelly.init();




    //audioController.mute.gain.value = 0;

  }

  function animate(){

    TWEEN.update();

    audioController.update();
    objectControls.update();
    //controls.update();

    for(var i = 0; i < loopList.length; i++ ){
      POLYS[loopList[i]].update();
    }
     
    var delta = clock.getDelta();


    G.uniforms.dT.value = delta;
    G.uniforms.time.value += delta;
    stats.update();

    Jelly.update();
    
    renderer.render( scene , camera );
    requestAnimationFrame( animate );
    


  }

  $("#startInfo").click( function(){

    loader.liftCurtain();
    looper.start();
    $("#startInfo").css( 'pointer-events', 'none' );
    animate();

    document.getElementById("TITLE").style.display="block";



    for( var i = 0; i < loopList.length;i++){
      POLYS[loopList[i]].play();
     // POLYS[loopList[i]].activate();
    }
   
  
  });



</script>


</body>
</html>


